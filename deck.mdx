import customTheme from "./theme";
import { Image, Notes } from "mdx-deck";
import { Appear } from "@mdx-deck/components";
import { Invert, Split, Horizontal } from "@mdx-deck/layouts";
import { syntaxHighlighterPrism } from "mdx-deck/themes";
import PremierOctet from "./PremierOctet";

export const themes = [syntaxHighlighterPrism, customTheme];

<Image src="assets/romandie-beer.png" size="contain" />

---

# Thanks to our sponsor

<Image src="assets/liip.png" size="contains" style={{ height: "300px" }} />

---

# Next events

MRB #18 - June
WWDC 2019 Livestream

MRB #19 - September
Flutter

MRB #20 - October
LeShop

---

# Job offers

<strong>QoQa</strong>

- Senior iOS Developer

<strong>JoliCode Lausanne</strong>

- [D√©veloppeur PHP Expert](https://www.welcometothejungle.co/fr/companies/jolicode/jobs/developpeur-php-expert_lausanne)

---

<Image
  src="assets/ship-wheel.jpg"
  style={{
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    color: "white",
    backgroundColor: "black",
    flexDirection: "column"
  }}
>

# Navigation in mobile apps

Focused on React Native solutions

</Image>

---

<Image
  src="https://jolicode.com/images/logo.svg"
  size="contain"
  width={"90vw"}
  height={"30vh"}
/>

# üá´üá∑ üá®üá≠

<Notes>
  J‚Äôai fait mes armes √† JoliCode, une soci√©t√© de conseils bas√© sur paris et
  Lausanne, qui propose un niveau d‚Äôexpertise tr√®s √©lev√© sur les frameworks PHP
  (Symfony) ou JavaScript, React / React Native, Docker, Elasticsearch, RabbitMQ
  ou bien encore Go
</Notes>

---

<PremierOctet style={{ height: "200px" }} />

<Notes>
  Aujourd‚Äôhui, je pilote d√©sormais l‚Äôactivit√© d‚Äôexpertise React sous la banni√®re
  de Premier Octet, qui est une filiale de JoliCode sp√©cialis√©e dans les technos
  js pour le front et le mobile - notamment React et React Native.
</Notes>

---

## About Me

- Thibault Lenclos, <Image src="https://upload.wikimedia.org/wikipedia/fr/thumb/c/c8/Twitter_Bird.svg/600px-Twitter_Bird.svg.png" style={{ width: "1em", height: "1em", display: "inline-block", backgroundPosition: "bottom" }} size="contain" /> [@thibz](https://twitter.com/thibz)
- React+Native developer at [Premier Octet](http://premieroctet.com)
- üë®üèª‚Äçüíª üé∏ üëæ

---

## What I love on mobile

- Scope is often smaller than on web
- UI simplicity
- Lots of API and languages
- The app fits in your hand üì±

---

<Invert>

## What I find hard on mobile

  <ul>
    <li>Animation</li>
    <li>User interaction</li>
    <li>Performance</li>
    <Appear>
      <li>
        <strong>Navigation (which is using all of the above üòÖ)</strong>
      </li>
    </Appear>
  </ul>
</Invert>

---

## Different types of Navigation

<Split>

<div>
  Hierarchical

<Image
  src={
    "https://developer.apple.com/design/human-interface-guidelines/ios/images/NavigationHierarchical-Graphic_2x.png"
  }
  style={{ height: 200, width: 200, margin: "auto" }}
  size="contain"
/>

</div>

<div>
  Flat

  <Image
    src={
      "https://developer.apple.com/design/human-interface-guidelines/ios/images/NavigationFlat-Graphic_2x.png"
    }
  style={{ height: 200, width: 200, margin: "auto" }}
    size="contain"
  />
</div>

</Split>

---

## Guidelines for each OS

Try to respect them as closely as possible

- üçè [iOS](https://developer.apple.com/design/human-interface-guidelines/ios/app-architecture/navigation/)

- ü§ñ [Android](https://material.io/design/navigation/understanding-navigation.html)

---

## A clear path

- The path must be logical, predictable and easy to access
- One path for one screen
- If multiple context exist for one screen, prefer modals

---

## Stay standard

- Don't lose the user with fancy navigations
- Use navigation components provided by the OS
  - Segmented controls for iOS or Drawer for Android
- Use tab bars to regroup functionnalities or content

---

## Navigation flows

- Login & register
- Drawer (left, right)
- Tabs
- List ‚û°Ô∏è Detail
- Modal & Dialog
- Logout
- Deep linking
- App linking

---

<Split>

## Create a navigation graph

<Image
  src="https://i.imgur.com/RHRQyL2.png"
  style={{ width: "600px", backgroundPosition: "right" }}
  size="contain"
  height="80vh"
/>

</Split>

---

## Learn from others

- See the different navigation patterns on other apps
  - App/Play store, Facebook, Spotify
  - Or any apps you like really üòá
  - Tabs, drawers and search are everywhere !

---

<video muted controls autoPlay loop style={{ height: "90vh", width: "100%" }}>
  <source src="assets/example-ios-settings.webm" type="video/webm" />
</video>

<Notes>iOS settings, with search, list navigation and modals</Notes>

---

<video muted controls autoPlay loop style={{ height: "90vh", width: "100%" }}>
  <source src="assets/google-play-example.mp4" type="video/mp4" />
</video>

<Notes>Google play, 2 tabs level, drawer, slide/fade transitions</Notes>

---

<video muted controls autoPlay loop style={{ height: "90vh", width: "100%" }}>
  <source src="assets/spotify-example.mp4" type="video/mp4" />
</video>

<Notes>
  Spotify with tabs, history like navigation, very brief fade animation
</Notes>

---

## How it works on Android

- Activity (screen)
- Fragments (screen or part of)
- NavController with a NavGraph

---

## How it works on iOS

- Navigation Controller
- Embeds other views controller

---

## React Native?

- Native app with a JavaScript runtime (JSCore)
- SDK exposing native API to developers
- Bridge to link the native ecosystem with userland JavaScript code

<Image
  src={"assets/react-native-architecture.png"}
  height="200px"
  width="auto"
  size="contain"
/>

---

<Invert>

## üóæ Navigation in React Native

- [react-navigation](https://reactnavigation.org/)
- [react-native-navigation](https://github.com/wix/react-native-navigation)
- Others but not really used or maintained :
  - react-router
  - native-navigation (AirBnb)
  - react-native-router-flux

</Invert>

---

## RNN vs React Navigation (1/2)

React Native Navigation

- Native implementation with a JavaScript API
- Creates a react app for each screen
- Needs some native code to install
- Backed by Wix

<Notes>
  Since each screen is native and navbar, drawers, tabs are natives. They are
  all displayed instantly while the React part has a small delay (render time)
</Notes>

---

## RNN vs React Navigation (2/2)

React Navigation

- JavaScript implementation
- Used to have performance issues
- Better now with [react-native-screens](https://github.com/kmagiera/react-native-screens), [react-native-reanimated](https://github.com/kmagiera/react-native-reanimated) and [react-native-gesture-handler](https://github.com/kmagiera/react-native-gesture-handler)

- Contributors from RN and Expo core devs
- [In depth comparison from Brent Vatne](https://www.youtube.com/watch?v=GBhdooVxX6Q)

<Notes>

- full customization
- use your own components
- blocking the JS thread will block the navigation

</Notes>

---

## What do I use ?

ü§î IMHO React Navigation is the best option

‚òùÔ∏è Go with RNN if you want to stay as close as possible with the OS implementation

---

## React Navigation Playground

<video muted controls autoPlay loop style={{ height: "75vh", width: "100%" }}>
  <source src="assets/react-navigation-playground.mp4" type="video/mp4" />
</video>

---

## Stack navigators

<svg
  x="0px"
  y="0px"
  viewBox="0 0 54.95 53.3"
  dataRadium="true"
  style={{
    margin: "auto",
    fill: "black",
    width: "100%",
    height: "200px",
    transformOrigin: "center center"
  }}
>
  <path d="M45.3,21.12l9.66-5.52L27.48,0L0,15.6l9.66,5.52L0,26.6l9.66,5.52L0,37.6l27.48,15.7l27.48-15.7l-9.66-5.48  l9.66-5.52L45.3,21.12z M27.48,2.3l23.44,13.31L27.48,29L4.04,15.61L27.48,2.3z M11.67,22.27l15.8,9.03l15.8-9.03l7.63,4.33  L27.48,40L4.04,26.61L11.67,22.27z M50.91,37.61L27.48,51L4.04,37.61l7.63-4.33l15.8,9.03l15.8-9.03L50.91,37.61z" />
</svg>

- Handle a stack of screens with transitions
- API Similar to the web history (push, back, replace, go)

---

```js
createStackNavigator({
  // For each screen that you can navigate to, create a new entry like this:
  Profile: {
    // `ProfileScreen` is a React component that will be the main content of the screen.
    screen: ProfileScreen,
    // When `ProfileScreen` is loaded by the StackNavigator, it will be given a `navigation` prop.

    // Optional: When deep linking or using react-navigation in a web app, this path is used:
    path: "people/:name"
    // The action and route params are extracted from the path.
  },

  ...MyOtherRoutes
});
```

---

## What is a screen ?

```tsx
interface NavScreenProps {
  navigation: NavigationScreenProp<NavigationState>;
}

class MyNavScreen extends React.Component<MyNavScreenProps> {
  render() {
    const { navigation } = this.props;
    const { push, replace, popToTop, pop, dismiss } = navigation;
    return (
      <View>
        <Button title="Go to Profile" onPress={() => push("Profile")} />
      </View>
    );
  }
}
```

<Notes>A simple component that receives navigation prop</Notes>

---

## Tab navigators

<svg
  x="0px"
  y="0px"
  viewBox="0 0 60 60"
  data-radium="true"
  style={{
    margin: "auto",
    fill: "black",
    width: "100%",
    height: "200px",
    transformOrigin: "center center"
  }}
>
  <path d="M53,14V7h-7V0H0v34h7v7h7v7h46V14H53z M2,32V2h42v5H7v25H2z M9,39v-5V9h37h5v5H14v25H9z M58,46H16v-5V16h37  h5V46z" />
</svg>

- Handle multiple screens in tabs
- Usually each tab has a separate navigation stack

---

## Tab navigators

```jsx
import React from "react";
import { Text, View } from "react-native";
import { createBottomTabNavigator, createAppContainer } from "react-navigation";

const HomeScreen = () => <Text>Home!</Text>;
const SettingsScreen = () => <Text>Settings!</Text>;

const TabNavigator = createBottomTabNavigator(
  {
    Home: HomeScreen,
    Settings: SettingsScreen
  },
  {
    defaultNavigationOptions: ({ navigation }) => ({
      tabBarIcon: ({ focused, horizontal, tintColor }) => {
        const { routeName } = navigation.state;
        // You can return any component that you like here!
        return <IconComponent name={routeName} size={25} color={tintColor} />;
      }
    }),
    tabBarOptions: {
      activeTintColor: "tomato",
      inactiveTintColor: "gray"
    }
  }
);

export default createAppContainer(TabNavigator);
```

---

## Nesting navigators

```jsx
const HomeStack = createStackNavigator({
  Home: HomeScreen,
  Details: DetailsScreen
});

const SettingsStack = createStackNavigator({
  Settings: SettingsScreen,
  Profile: ProfileScreen
});

const TabNavigator = createBottomTabNavigator({
  Home: HomeStack,
  Settings: SettingsStack
});
```

---

## Drawer navigator

```jsx
const HomeScreen = () => <Text>Home!</Text>;
HomeScreen.navigationOptions = {
  drawerLabel: "Home",
  drawerIcon: ({ tintColor }) => <Image source={require("./home-icon.png")} />
};

const SettingsScreen = () => <Text>Settings!</Text>;
SettingsScreen.navigationOptions = {
  drawerLabel: "Settings",
  drawerIcon: ({ tintColor }) => (
    <Image source={require("./settings-icon.png")} />
  )
};

const MyDrawerNavigator = createDrawerNavigator({
  Home: {
    screen: HomeScreen
  },
  Settings: {
    screen: Settings
  }
});

const MyApp = createAppContainer(MyDrawerNavigator);
```

---

## With Redux

<video muted controls autoPlay loop style={{ height: "600px" }}>
  <source src="assets/redux-navigation.webm" type="video/webm" />
</video>

<Notes>- Not recommended as it can cause performance issues</Notes>

---

## Collapsible header

- Save screen space by hiding the header
- [react-navigation-collapsible](https://github.com/benevbright/react-navigation-collapsible)

<Image
  src="https://github.com/benevbright/react-navigation-collapsible/raw/master/docs/demo.gif?raw=true"
  size="contain"
  style={{ height: "44vh", width: "80vh", margin: "auto" }}
/>

---

## Shared transitions

<Horizontal>

- Visual connection between screens via motion and transformation
- [react-navigation-fluid-transitions](https://github.com/fram-x/fluidtransitions)
- Creates a custom navigator
- use Transition component to morph the UI

<Image
  src="https://github.com/fram-x/FluidTransitions/raw/develop/docs/example.gif"
  style={{ width: "24vw", height: "60vh", margin: "auto" }}
  size="contain"
/>

</Horizontal>

---

## Avoid blank flash on start

On slow devices users can have a white screen while starting the app due to JSCore boot and Javascript parsing.

‚òùÔ∏è Display a native splash screen

[react-native-splash-screen](https://github.com/crazycodeboy/react-native-splash-screen)

---

## Why not a web app ?

- React Navigation has web support since v3

```jsx
import { Link } from "react-navigation";

<Link toRoute="Profile" params={{ name: "jamie" }}>
  Jamie's Profile
</Link>;

// Will render <a href="/people/jamie">Jamie's Profile</a
```

- Supports SSR
- Use with [react-native-web](https://github.com/necolas/react-native-web) to render for the web platform

---

## Thanks !

[@thibz](https://twitter.com/thibz)

<PremierOctet />

üôå : [Harris Freddy](http://react-navigation-keynote.surge.sh) and [Brent Vatnes](https://www.youtube.com/watch?v=GBhdooVxX6Q) for their presentations
